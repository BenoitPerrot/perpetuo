logging = true

auth {
  jwt.secret = "local-jwt-secret"
  host = "http://auth"
  authorize.url = ${auth.host}"/auth/oauth2/authorize?realm=test&client_id=perpetuo&response_type=token"
  tokeninfo.url = ${auth.host}"/auth/oauth2/tokeninfo?realm=test"
  localUserNames = ["anonymous"]
}

db {
  ephemeral = true

  name = "Deployment_DB"
  driver {
    name = "org.h2.Driver"
    profile = "h2"
  }
  schema = "dbo"
  username = "sa"
}

selfUrl = "http://somewhere"

targetDispatcher {
  type = "singleExecutor"
  singleExecutor {
    type = class
    class = com.criteo.perpetuo.engine.executors.DummyExecutionTrigger
    config = ${executors.dummy}
  }
}

engine.cache.stateExpirationTimeInMs = 0

permissions {
  type = "fineGrained"
  fineGrained {
    perGeneralAction {
      updateProduct = [
        {
          userNames = ["bob.the.producer"]
        }
      ]
    }
    perProduct = [
      {
        regex = ".*"
        perAction {
          requestOperation = [
            {
              groupNames = ["Users"]
            }
          ]
          applyOperation = [
            {
              userNames = ["r.eleaser"]
            }
          ]
        }
      }
    ]
  }
}
